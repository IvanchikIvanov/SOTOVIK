!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){function n(){}function o(t,e){return Math.floor(Math.random()*(e-t+1))+t}n.maxFromBits=function(t){return Math.pow(2,t)},n.limitUI04=n.maxFromBits(4),n.limitUI06=n.maxFromBits(6),n.limitUI08=n.maxFromBits(8),n.limitUI12=n.maxFromBits(12),n.limitUI14=n.maxFromBits(14),n.limitUI16=n.maxFromBits(16),n.limitUI32=n.maxFromBits(32),n.limitUI40=n.maxFromBits(40),n.limitUI48=n.maxFromBits(48),n.randomUI04=function(){return o(0,n.limitUI04-1)},n.randomUI06=function(){return o(0,n.limitUI06-1)},n.randomUI08=function(){return o(0,n.limitUI08-1)},n.randomUI12=function(){return o(0,n.limitUI12-1)},n.randomUI14=function(){return o(0,n.limitUI14-1)},n.randomUI16=function(){return o(0,n.limitUI16-1)},n.randomUI32=function(){return o(0,n.limitUI32-1)},n.randomUI40=function(){return(0|Math.random()*(1<<30))+(0|1024*Math.random())*(1<<30)},n.randomUI48=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},n.paddedString=function(t,e,n){n=n||"0";for(var o=e-(t=String(t)).length;o>0;o>>>=1,n+=n)1&o&&(t=n+t);return t},n.prototype.fromParts=function(t,e,o,i,a,r){return this.version=o>>12&15,this.hex=n.paddedString(t.toString(16),8)+"-"+n.paddedString(e.toString(16),4)+"-"+n.paddedString(o.toString(16),4)+"-"+n.paddedString(i.toString(16),2)+n.paddedString(a.toString(16),2)+"-"+n.paddedString(r.toString(16),12),this},n.prototype.toString=function(){return this.hex},n.prototype.toURN=function(){return"urn:uuid:"+this.hex},n.prototype.toBytes=function(){for(var t=this.hex.split("-"),e=[],n=0,o=0;o<t.length;o++)for(var i=0;i<t[o].length;i+=2)e[n++]=parseInt(t[o].substr(i,2),16);return e},n.prototype.equals=function(t){return t instanceof UUID&&this.hex===t.hex},n.getTimeFieldValues=function(t){var e=t-Date.UTC(1582,9,15),n=e/4294967296*1e4&268435455;return{low:1e4*(268435455&e)%4294967296,mid:65535&n,hi:n>>>16,timestamp:e}},n._create4=function(){return(new n).fromParts(n.randomUI32(),n.randomUI16(),16384|n.randomUI12(),128|n.randomUI06(),n.randomUI08(),n.randomUI48())},n._create1=function(){var t=(new Date).getTime(),e=n.randomUI14(),o=1099511627776*(1|n.randomUI08())+n.randomUI40(),i=n.randomUI04(),a=0;t!=a?(t<a&&e++,a=t,i=n.randomUI04()):Math.random()<.25&&i<9984?i+=1+n.randomUI04():e++;var r=n.getTimeFieldValues(a),s=r.low+i,c=4095&r.hi|4096,l=(e&=16383)>>>8|128,d=255&e;return(new n).fromParts(s,r.mid,c,l,d,o)},n.create=function(t){return this["_create"+(t=t||4)]()},n.fromTime=function(t,e){e=e||!1;var o=n.getTimeFieldValues(t),i=o.low,a=4095&o.hi|4096;return!1===e?(new n).fromParts(i,o.mid,a,0,0,0):(new n).fromParts(i,o.mid,a,128|n.limitUI06,n.limitUI08-1,n.limitUI48-1)},n.firstFromTime=function(t){return n.fromTime(t,!1)},n.lastFromTime=function(t){return n.fromTime(t,!0)},n.fromURN=function(t){var e;return(e=/^(?:urn:uuid:|\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(?:\})?$/i.exec(t))?(new n).fromParts(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),parseInt(e[4],16),parseInt(e[5],16),parseInt(e[6],16)):null},n.fromBytes=function(t){if(t.length<5)return null;for(var e="",o=0,i=[4,2,2,2,6],a=0;a<i.length;a++){for(var r=0;r<i[a];r++){var s=t[o++].toString(16);1==s.length&&(s="0"+s),e+=s}6!==i[a]&&(e+="-")}return n.fromURN(e)},n.fromBinary=function(t){for(var e=[],o=0;o<t.length;o++)if(e[o]=t.charCodeAt(o),e[o]>255||e[o]<0)throw new Error("Unexpected byte in binary data.");return n.fromBytes(e)},n.new=function(){return this.create(4)},n.newTS=function(){return this.create(1)},t.exports=n},function(t,e,n){"use strict";n.r(e);n(0);function o(t){return t.json().then(e=>e.$error?Promise.reject(e.$error.msg||e.$error.scn):(e.headers=t.headers,e)).catch(()=>Promise.reject(`widget error: ${t.status}`))}const i={};var a={COOKIE_NAME_PREFIX:"tb_notif_widget_",WIDGET_USER_ID_COOKIE_TTL:31536e4,COOKIE_WIDGET_USER_ID:"tb_notif_widget_widgetUserId",SECONDS_IN_DAY:86400,WIDGET_TYPE_API_CALL:"apiCall",WIDGET_TYPE_WIDGET:"widget",DEFAULT_WIDGET_TYPE:"widget",VISITS_COUNT_PROP:"tb_chat_visits_count",SESIONS_COUNT_PROP:"tb_chat_sessions_count",SESSION_TIME_MS:18e5,SESSIONS_ENTRANCE_PROP:"tb_chat_entrance_point"};var r=function(t){const e=t.split("&"),n={};if(t.length>0)for(var o=0;o<e.length;o++){const t=e[o].split("=");let i,a;try{i=decodeURIComponent(t[0]),a=decodeURIComponent(t[1])}catch(t){continue}if(i)switch(typeof n[i]){case"undefined":n[i]=a;break;case"string":{const t=[n[i],a];n[i]=t;break}default:n[i].push(a)}}return n},s={fullUrl:()=>window.location.protocol+"//"+window.location.host+window.location.pathname,utmParams(){let t={},e=window.location.search.substring(1).split("&").filter(t=>t.indexOf("utm")>-1),n=new Map(e.map(t=>t.split("=").map(t=>decodeURIComponent(t))));for(let[e,o]of n)t[e]=o;return t}},c={getVisitsCount:()=>parseInt(localStorage.getItem(a.VISITS_COUNT_PROP)),setVisitsCount(t){localStorage.setItem(a.VISITS_COUNT_PROP,t)},increaseVisitsCount(){if(this.getVisitsCount()){let t=this.getVisitsCount()+1;this.setVisitsCount(t)}else this.setVisitsCount(1);return this.getVisitsCount()}},l={isNewSession:!1,entrancePoint:localStorage.getItem(a.SESSIONS_ENTRANCE_PROP),getSessionsCount:()=>JSON.parse(localStorage.getItem(a.SESSIONS_COUNT_PROP)),setSessionsCount(t){let e={value:t,timestamp:Date.now()};localStorage.setItem(a.SESSIONS_COUNT_PROP,JSON.stringify(e)),localStorage.setItem(a.SESSIONS_ENTRANCE_PROP,s.fullUrl()),this.entrancePoint=localStorage.getItem(a.SESSIONS_ENTRANCE_PROP),this.isNewSession=!0},increaseSessionsCount(){if(this.getSessionsCount()){let t=this.getSessionsCount();t.timestamp+a.SESSION_TIME_MS>Date.now()&&this.setSessionsCount(t.value+1)}else this.setSessionsCount(1);return this.getSessionsCount()}};class d{constructior(){}static get center(){return{x:Math.floor(.5*window.innerWidth),y:Math.floor(.5*window.innerHeight)}}static getRatio(t){let e=t/100;return{width:Math.floor(window.innerWidth*e),height:Math.floor(window.innerHeight*e)}}static getRatioPropString(t){let e=this.getRatio(t);return`width=${e.width},height=${e.height}`}}!function(){var t=_tbEmbedArgs,e={};const n={};for(var a in t)t.hasOwnProperty(a)&&(e[t[a][0]]=t[a][1]);var u=e.baseUrl,m=e.staticUrl||"https://widget-cdn-prod.textback.io/";function g(t){try{localStorage.setItem("welcomeClosed",t)}catch(t){console.error("Failed to access to localStorage")}}u.includes("dev")&&(m="https://widget-cdn-dev.textback.io/"),e.apiPath?n.apiPath=e.apiPath:n.apiPath="https://api.textback.io/api";var p=!1,h=!1,f=!!document.getElementsByTagName("base")[0];/iPhone|iPad|iPod/i.test(navigator.userAgent)&&(h=!0),/Android/i.test(navigator.userAgent),/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent)&&(p=!0);var b=!1,w=window.navigator.userAgent,v=w.indexOf("MSIE "),_=w.indexOf("Trident/"),k="";(v>-1||_>-1)&&(b=!0);var I=function(t){try{return localStorage.getItem("welcomeClosed")}catch(e){return console.error("Failed to access to localStorage"),t}}("false");R(u+"/api/widgets/"+e.widgetId,function(t){var a=JSON.parse(t.responseText).$value,d=document.getElementById("textback_widget");(function(t,e={}){const n=JSON.stringify(e);return i[n]?i[n]:(i[n]=fetch(`${t}/endUserNotifications/deepLinks`,{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then(o),i[n])})(n.apiPath,{accountId:a.accountId,widgetId:a.id,insecureContext:function(t={}){const n=Object.assign({},t);return n.pageTitle=window.document.title,n.pageUrl=s.fullUrl(),n.params=r(window.location.search.substring(1)),n.timezoneOffset=(new Date).getTimezoneOffset(),n.cookies=function(t){const e={};return t.split(";").forEach(t=>{const n=t.indexOf("="),o=t.slice(0,n).trim(),i=t.slice(n+1);e[o]=i}),e}(document.cookie),n.utmParams=s.utmParams(),n.referer=document.referrer,n.visitDate=(new Date).toISOString(),n.visitsCount=c.increaseVisitsCount(),n.sessionsCount=l.increaseSessionsCount(),n.currentEntrancePoint=l.entrancePoint,n.userAgent=navigator.userAgent,e.additional&&(n.additional=e.additional),n}(),user:{id:a.userId}}).then(function(t){k=t,p&&!0!==a["show-mobile"]||function(t,e,n){var o=e.channels,i=0,a={};for(var r in o)o.hasOwnProperty(r)&&s(o[r].channel,function(t,e){++i==o.length&&n(a)});function s(e,n){var o=t+"widget/img/icon_"+e+".svg";R(o,function(t){n(e,t.responseText)})}}(m,a,function(e){!function(e,n){var o,i,a,r,s=document.getElementById("textback_widget"),c=document.getElementById("drop_a_line_button"),l=document.getElementById("widget-mobile-button"),d=document.getElementById("textback_button_wrap"),u=document.getElementById("shadow_pulse"),w=document.getElementById("border_pulse"),v=document.getElementById("textback_icon_inner"),_=document.getElementById("textback_icon_inner_mobile"),k=document.getElementById("powered_by_textback_desktop"),M=document.getElementById("powered_by_textback"),R="",$=e.channels,A={},D=e.channels.filter(t=>"vk"===t.channel),F={},j="Text us",H="Our number for SMS",W=e["custom-channels-total"],V=e["show-waterdrop"],X=e["hide-tb-logo"],q=e["show-lightbox"],z=e["widget-desktop-icon"],G=e["widget-mobile-icon"],Y=!e.isNewAge,J=e.tgRedirector;switch(z){case"desktopTelegram":a="tb-icon-tg";break;case"desktopMessaging":a="tb-icon-messaging";break;case"desktopBubble":a="tb-icon-bubble";break;case"desktopPhone":a="tb-icon-phone-start";break;case"desktopCarousel":a="carousel";break;default:a="tb-icon-phone-start"}if(c.style.display="block","carousel"==a){var K=$.filter(function(t){return t.enabled}),Q=K.map(function(t){switch(t.channel){case"vk":return"tb-icon-vk";case"skype":return"tb-icon-skype";case"facebook":return"tb-icon-facebook";case"viber":return"tb-icon-viber";case"sms":return"tb-icon-sms";case"tg":return"tb-icon-tg";case"whatsapp":case"whatsappb":return"tb-icon-whatsapp";case"instagram":return"tb-icon-instagram"}}),Z=0;v.setAttribute("data-carousel",!0),v.className=Q[Q.length-1],setInterval(function(){v.className=Q[Z++],Z>=Q.length&&(Z=0)},1500)}else v.className=a;switch(G){case"mobileAngle":r="angle";break;case"mobileTelegram":r="tb-icon-tg";break;case"mobileMessaging":r="tb-icon-messaging";break;case"mobileBubble":r="tb-icon-bubble";break;case"mobilePhone":r="tb-icon-phone-start";break;case"mobileCarousel":r="carousel";break;default:r="angle"}if("carousel"==r){var K=$.filter(function(t){return t.enabled}),Q=K.map(function(t){switch(t.channel){case"vk":return"tb-icon-vk";case"skype":return"tb-icon-skype";case"facebook":return"tb-icon-facebook";case"viber":return"tb-icon-viber";case"sms":return"tb-icon-sms";case"tg":return"tb-icon-tg";case"whatsapp":case"whatsappb":return"tb-icon-whatsapp";case"instagram":return"tb-icon-instagram"}}),tt=0;_.setAttribute("data-carousel",!0),_.className=Q[Q.length-1],setInterval(function(){_.className=Q[tt++],++tt>=Q.length&&(tt=0)},1500)}else"angle"==r?(_.className="",l.classList.add("angle")):_.className=r;"ru"==x&&(j="Написать SMS",H="Напишите нам SMS на номер");V&&setTimeout(function(){C(u,"active"),C(w,"active")},500);X&&(C(k,"hidden"),C(M,"hidden"));for(var et in $)if($.hasOwnProperty(et)&&$[et].enabled){var nt=!1;"vk"!==$[et].channel||nt||(L("//vk.com/js/api/openapi.js?130"),nt=!0);var ot=m+"widget/img/icon_"+$[et].channel+".svg";o=p?"sms"==$[et].channel?'<a id="smsurl" href="sms:+{{channelUrl}}" class="widget-link tb-widget-tooltip widget-link-{{channel}}"  target="{{target}}" rel="noopener nofollow"><img src='+ot+'><span class="tooltiptext button-tooltiptext"><span class="smstext-short">'+j+'</span><span class="smstext-full">'+H+'</br><span class="smsnumber">+{{channelUrl}}</span></span></span></a>':'<a href="{{channelUrl}}" class="widget-link tb-widget-tooltip widget-link-{{channel}}"  target="{{target}}" rel="noopener nofollow"><img src='+ot+'><span class="tooltiptext button-tooltiptext">{{tooltipText}}</span></a>':"sms"==$[et].channel?'<a id="smsurl" href="sms:+{{channelUrl}}" class="widget-link tb-widget-tooltip widget-link-{{channel}}"  target="{{target}}" rel="noopener nofollow" onclick="(typeof(window._tbOnWidgetClick) == \'function\') && window._tbOnWidgetClick(\'{{channel}}\')"><img src='+ot+'><span class="tooltiptext button-tooltiptext"><span class="smstext-short">'+j+'</span><span class="smstext-full">'+H+'</br><span class="smsnumber">+{{channelUrl}}</span></span></span></a>':'<a href="{{channelUrl}}" class="widget-link tb-widget-tooltip widget-link-{{channel}}"  target="{{target}}" rel="noopener nofollow" onclick="(typeof(window._tbOnWidgetClick) == \'function\') && window._tbOnWidgetClick(\'{{channel}}\')"><img src='+ot+'><span class="tooltiptext button-tooltiptext">{{tooltipText}}</span></a>';var it,at={};(it=Y?S($[et],J):E($[et],J))?(at.channelUrl=it,at.channel=$[et].channel,at.tooltipText=y[x][$[et].channel+"_channel"],at.target=p?"_self":"_blank",at.svgIcon=n[$[et].channel],R+=U(o,at),"facebook"===$[et].channel&&(A[""+$[et].slug]=$[et].id),"vk"===$[et].channel&&(F[""+$[et].slug]=parseInt($[et].id.replace("club","")))):console.log("Sorry, "+$[et].channel+" is not supported yet.")}function rt(t){var t=t||"",n=new Date,o=n.getDay(),i=n.getHours(),a=n.getMinutes(),r=e["custom-channel-from-hours"+t],s=e["custom-channel-from-minutes"+t],c=e["custom-channel-to-hours"+t]?e["custom-channel-to-hours"+t]:24,l=e["custom-channel-to-minutes"+t],d=!0;switch(o){case 1:!0===e["disable-custom-channel-mo"+t]&&(d=!1);break;case 2:!0===e["disable-custom-channel-tu"+t]&&(d=!1);break;case 3:!0===e["disable-custom-channel-we"+t]&&(d=!1);break;case 4:!0===e["disable-custom-channel-th"+t]&&(d=!1);break;case 5:!0===e["disable-custom-channel-fr"+t]&&(d=!1);break;case 6:!0===e["disable-custom-channel-sb"+t]&&(d=!1);break;case 0:!0===e["disable-custom-channel-su"+t]&&(d=!1)}return r>i?d=!1:r==i&&s>a&&(d=!1),c<i?d=!1:c==i&&l<a&&(d=!1),d}function st(t){var t=t||"",n=e["custom-channel-icon"+t]?e["custom-channel-icon"+t]:"default",o=e["custom-channel-tooltip"+t]?e["custom-channel-tooltip"+t]:"",a=e["custom-channel-action"+t],r=m+"widget/img/icon_custom.svg",s="",c="",l=document.createElement("img"),d=document.createElement("div"),u=document.createElement("span"),g=document.querySelector(".textback-welcome-list");e["custom-channel-icon-url"+t].trim()?l.src=e["custom-channel-icon-url"+t]:l.src=r,"default"==n&&(l.src=r),"link"==a?s=e["custom-channel-link"+t]:"callback"==a&&(c=e["custom-channel-callback"+t]),d.setAttribute("class","widget-link tb-widget-tooltip widget-link-custom"),u.setAttribute("class","tooltiptext button-tooltiptext"),u.innerHTML=o,d.appendChild(l),d.appendChild(u),i.appendChild(d);var h=d.cloneNode(!0);e["show-welcome"]&&g.appendChild(h),d.addEventListener("click",function(){c&&"function"==typeof window[c]?window[c]():s?(window.open(s,"_blank"),O()):console.log("no action")}),p||(d.onmouseover=function(t){C(t.currentTarget,"tb-hover")},d.onmouseout=function(t){N(t.currentTarget,"tb-hover")}),h.addEventListener("click",function(){c&&"function"==typeof window[c]?window[c]():s?(window.open(s,"_blank"),O()):console.log("no action")})}(i=document.getElementById("tb_widget_links")).innerHTML=R;var ct=document.querySelectorAll("#textback_widget .widget-link");if(!p)for(var lt=0;lt<ct.length;lt++)ct[lt].onmouseover=function(t){C(t.currentTarget,"tb-hover")},ct[lt].onmouseout=function(t){N(t.currentTarget,"tb-hover")};if(f&&h&&!e["show-mobile-version"]){var dt=document.getElementById("textback_button_wrap"),ut=document.getElementById("textback_icon_tb_svg"),mt=document.createElement("div");mt.id="textback_icon_background",dt.replaceChild(mt,ut)}"open-only-click"!==e["widget-open"]&&(d.addEventListener("mouseenter",function(){return!!document.getElementById("tb_widget").classList.contains("tb-desktop")&&(!s.classList.contains("expanded")&&!s.classList.contains("active")&&(C(s,"active"),void gt()))}),d.addEventListener("mouseleave",function(){if(!document.getElementById("tb_widget").classList.contains("tb-desktop"))return!1;N(s,"active")}));function gt(){d.classList.remove("rotate-reverse-btn"),d.classList.add("rotate-btn"),setTimeout(function(){var e,n,o=document.getElementById("tb_widget_lightbox");q&&C(o,"active"),e=document.getElementById("textback_widget"),n=document.getElementById("tb_widget_links"),C(e,"expanded"),setTimeout(function(){C(n,"animate")},300),"true"!==I&&(window.appInsights&&appInsights.trackEvent("welcome.close",{action:"not_open"},{datetime:Date.now()},{timeout:t["welcome-seconds"]}),g("true"),I="true")},180)}d.addEventListener("click",function(){s.classList.contains("expanded")?O():gt()}),document.getElementById("widget_tooltiptext").addEventListener("click",function(){gt()}),document.body.addEventListener("click",function(t){for(var e=document.getElementById("tb_widget_lightbox"),n=document.getElementById("textback_button_wrap"),o=function(t){for(var e=t,n=[];null!=e.parentNode&&e.parentNode!=document.documentElement;)n.push(e.parentNode),e=e.parentNode;return n}(t.target),i=0,a=o.length;i<a;i++){var r=o[i];if(r.classList.contains("widget-link")&&(C(n,"rotate-reverse-btn"),N(n,"rotate-btn"),N(e,"active")),"textback_widget"===r.id)return}O()}),l.addEventListener("click",function(){s.classList.toggle("expanded")}),document.getElementById("smsurl")&&document.getElementById("smsurl").addEventListener("click",P);"widget-alignment-left"==e["widget-alignment"]?(s.setAttribute("data-widget-alignment-left",!0),e["widget-alignment-left"]&&(!e["show-mobile-version"]||window.screen.availWidth>=480)&&(s.style.marginLeft=e["widget-alignment-left"]+"px")):e["widget-alignment-right"]&&(!e["show-mobile-version"]||window.screen.availWidth>=480)&&(s.style.marginRight=e["widget-alignment-right"]+"px");e["widget-alignment-bottom"]&&(!e["show-mobile-version"]||window.screen.availWidth>=480)&&(s.style.marginBottom=e["widget-alignment-bottom"]+"px");function pt(t,e){var n=parseInt(t.substring(0,t.length/3),16),o=parseInt(t.substring(t.length/3,2*t.length/3),16),i=parseInt(t.substring(2*t.length/3,3*t.length/3),16);return"rgba("+n+","+o+","+i+","+e+")"}if(e["bg-color"]&&(!h||!f)){var ht=e["bg-color"]+"";u.style.setProperty("--box-shadow-color",pt(ht,"0.4")),u.style.setProperty("--box-shadow-color-opacity",pt(ht,"0")),w.style.borderColor="#"+ht,document.getElementById("textback_icon_bg").style.fill="#"+ht}e["widget-size"]&&(p&&e["show-mobile-version"]||(c.style.width=e["widget-size"]+"px",c.style.height=e["widget-size"]+"px"));if("ru"==x&&!e["disable-desktop-tooltip-ru"]){var ft=document.getElementById("widget_tooltiptext");e["desktop-tooltiptext-ru"]&&e["desktop-tooltiptext-ru"].length>0&&(ft.innerHTML=e["desktop-tooltiptext-ru"]),e["desktop-tooltiptext-ru"]&&e["desktop-tooltiptext-ru"].length>13&&C(ft,"wide"),N(ft,"tooltiptext-hidden")}if("en"==x&&!e["disable-desktop-tooltip-en"]){var ft=document.getElementById("widget_tooltiptext");e["desktop-tooltiptext-en"]&&e["desktop-tooltiptext-en"].length>0&&(ft.innerHTML=e["desktop-tooltiptext-en"]),e["desktop-tooltiptext-en"]&&e["desktop-tooltiptext-en"].length>13&&C(ft,"wide"),N(ft,"tooltiptext-hidden")}if("ru"==x&&!e["disable-mobile-tooltip-ru"]){var ft=document.getElementById("widget-mobile-tooltiptext");e["mobile-tooltiptext-ru"]&&e["mobile-tooltiptext-ru"].length>0&&(ft.innerHTML=e["mobile-tooltiptext-ru"]),N(ft,"tooltiptext-hidden")}if("en"==x&&!e["disable-mobile-tooltip-en"]){var ft=document.getElementById("widget-mobile-tooltiptext");e["mobile-tooltiptext-en"]&&e["mobile-tooltiptext-en"].length>0&&(ft.innerHTML=e["mobile-tooltiptext-en"]),N(ft,"tooltiptext-hidden")}p&&(document.getElementById("widget-mobile-button").style.backgroundColor="#"+e["bg-color"]);"function"==typeof window._tbOnWidgetReady&&window._tbOnWidgetReady(document.getElementById("textback_widget"));e["show-welcome"]&&function(t,e){if("true"===I)return!1;var n=t.channels.filter(function(t){return t.enabled}),o=document.getElementById("tb_welcome"),i=document.getElementById("textback_widget"),a=document.getElementById("tb_welcome_links");n.length<4&&C(a,"center");a.innerHTML=e,b&&N(a,"flex");document.getElementById("tb_welcome_name").innerHTML=t["welcome-name"],"image"==t["welcome-avatar"]&&(document.getElementById("tb_welcome_img").src=t["welcome-avatar-url"]);t["welcome-tooltip"]&&(document.getElementById("tb_welcome_tooltip_text").innerHTML=t["welcome-tooltip"]);document.getElementById("tb_welcome_tooltip_close").addEventListener("click",function(){g("true"),window.appInsights&&appInsights.trackEvent("welcome.close",{action:"close_button_press"},{datetime:Date.now()}),I="true",N(o,"active"),N(i,"hidden")}),document.addEventListener("mousemove",function(e){0==t["disable-welcome-cursor"]&&e.clientY<50&&"true"!==I&&("true"!==I&&window.appInsights&&appInsights.trackEvent("welcome.open",{action:"open_mousemove"},{datetime:Date.now()},{timeout:t["welcome-seconds"]}),C(o,"active"),setTimeout(function(){C(o,"animate")},0),C(i,"hidden"),clearTimeout(s))});var r=t["welcome-seconds"]+"000",s=setTimeout(function(){"true"!==I&&(window.appInsights&&appInsights.trackEvent("welcome.open",{action:"open_timeout"},{datetime:Date.now()},{timeout:t["welcome-seconds"]}),C(o,"active"),setTimeout(function(){C(o,"animate")},0),C(i,"hidden"))},r)}(e,R);for(lt=0;lt<W;lt++){var bt=lt||"";!0===e["show-custom-channel"+bt]&&rt(bt)&&st(bt+"")}p?Y||T(A):Y?(function(t){var e=document.querySelectorAll(".widget-link-facebook");if(!e.length)return;e.forEach(function(e,n){var o=B(t,e.href),i=['<div class="widget-popup">','<div class="widget-popup-header facebook">','<div class="widget-popup-icon"><svg version="1.1" style="width: 25px;height: 25px;" id="Facebook_Messenger" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="30" height="40" viewBox="96 93 322 324" xml:space="preserve"  ><g id="Facebook_Messenger_1_"><g><path style="fill:white;" d="M257,93c-88.918,0-161,67.157-161,150c0,47.205,23.412,89.311,60,116.807V417l54.819-30.273 C225.449,390.801,240.948,393,257,393c88.918,0,161-67.157,161-150S345.918,93,257,93z M273,295l-41-44l-80,44l88-94l42,44l79-44  L273,295z"/></g></g></svg></div>','<div class="widget-popup-title">Facebook Messenger</div>','<div class="widget-popup-close">&times;</div>',"</div>",'<iframe src="https://www.facebook.com/plugins/page.php?',"href=https%3A%2F%2Fwww.facebook.com%2F"+o+'&tabs=messages&width=254&height=310&small_header=true&adapt_container_width=true&hide_cover=true&show_facepile=false&appId=142961616149431" width="254" height="310" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true"></iframe>',"</div>"].join("\n");e.addEventListener("click",function(t){t.preventDefault();var e=document.getElementById("textback_fb_community_msgs");e.innerHTML=i,document.querySelector("#textback_fb_community_msgs .widget-popup-close").addEventListener("click",function(t){document.getElementById("textback_fb_community_msgs").style.display="none"}),document.getElementById("textback_fb_community_msgs").style.display="block",document.getElementById("textback_widget").className="",document.getElementById("tb_welcome").className="",g("true"),I="true"},!1)})}(A),function(t,e){var n=document.querySelectorAll(".widget-link-vk");if(!n.length)return;n.forEach(function(n,o){var i=B(t,n.href);n.addEventListener("click",function(t){t.preventDefault();let n=e.find(t=>t.slug===i);VK.Widgets.CommunityMessages("textback_vk_community_msgs",n.id,{shown:"1",buttonType:"no_button"}),document.getElementById("textback_vk_community_msgs").style.display="block",document.getElementById("textback_widget").className="",document.getElementById("tb_welcome").className="",g("true"),I="true"},!1)})}(F,D)):T(A)}(a,e),d.className="",a["show-mobile-version"]&&p&&C(d,"widget-mobile"),setTimeout(function(){C(document.getElementById("textback_button_wrap"),"tb-scale"),C(document.getElementById("widget_tooltiptext"),"active")},0),C(document.getElementById("tb_widget"),p?"tb-mobile":"tb-desktop"),window.screen.availWidth>360?document.querySelectorAll("#tb_widget .widget-link").length>6&&C(d,"high"):document.querySelectorAll("#tb_widget .widget-link").length>5&&C(d,"high")})})});var y=window.TextBack.widget.translations,x=document.getElementById("textback_widget").getAttribute("data-lang");function E(t,e){var n=t.channel,o=t.id,i=t.slug;const a=encodeURIComponent("Отправьте не изменяя это сообщение "),r=t.blockCtaText?"":`&text=${a}start_chat_${k.$value.id}`;switch(n){case"facebook":return p?"https://m.me/"+(i||o):"https://www.facebook.com/messages/"+(i||o);case"vk":return`https://vk.me/${i}?ref=start_chat_${k.$value.id}`;case"tg":return e?`${e}${o}?start=start_chat_${k.$value.id}`:`https://telegram.me/${o}?start=start_chat_${k.$value.id}`;case"viber":return`viber://pa?chatURI=${o}&context=start_chat_${k.$value.id}`;case"skype":return"https://join.skype.com/bot/"+o+"?add";case"sms":return o;case"whatsapp":case"whatsappb":return`https://api.whatsapp.com/send?phone=${o.replace(/\+/,"")}${r}`;case"instagram":return"https://instagram.com/"+o;default:return null}}function S(t,e){var n=t.channel,o=t.id,i=t.slug;switch(n){case"facebook":return p?"https://m.me/"+(i||o):"https://www.facebook.com/messages/"+(i||o);case"vk":return`https://vk.me/${i}?ref=start_chat_${k.$value.id}`;case"tg":return e?`${e}${o}`:"https://telegram.me/"+o;case"viber":return"viber://pa?chatURI="+o;case"skype":return"https://join.skype.com/bot/"+o+"?add";case"sms":return o;case"whatsapp":case"whatsappb":return`https://api.whatsapp.com/send?phone=${o.replace(/\+/,"")}`;case"instagram":return"https://instagram.com/"+o;default:return null}}function T(t){var e=document.querySelectorAll(".widget-link-facebook");e.length&&e.forEach(function(e,n){var o=B(t,e.href);e.addEventListener("click",function(t){t.preventDefault(),window.open("https://m.me/"+o+"?ref=start_chat_"+k.$value.id,"tb_facebook",d.getRatioPropString(90))},!1)})}function B(t,e){let n=Object.keys(t).find(t=>-1!==e.indexOf(t)),o=Object.values(t).find(t=>-1!==e.indexOf(t.toString()));return n||o}function U(t,e){var n,o="";for(var i in e){var a=e[i];e.hasOwnProperty(i)&&(n=new RegExp("{{\\s*"+i+"\\s*}}"),o=t.split(n).join(a),t=o)}return o}function O(){var t=document.getElementById("textback_widget"),e=document.getElementById("textback_button_wrap"),n=document.getElementById("tb_widget_links"),o=document.getElementById("tb_widget_lightbox");N(n,"animate"),N(t,"expanded"),N(o,"active"),setTimeout(function(){C(e,"rotate-reverse-btn"),N(e,"rotate-btn")},0)}function P(t){p||(t.preventDefault(),document.getElementById("smsurl").classList.toggle("expandedtext"))}function C(t,e){t.classList?t.classList.add(e):M(t,e)||(t.className+=" "+e)}function N(t,e){if(t.classList)t.classList.remove(e);else if(M(t,e)){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function M(t,e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");return(void 0===t.className?window.event.srcElement:t).className.match(n)}function L(t){var e=document.createElement("script");e.type="text/javascript",e.src=t,e.charset="utf-8",document.head.appendChild(e)}function R(t,e){var n;if("undefined"!=typeof XMLHttpRequest)n=new XMLHttpRequest;else for(var o=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],i=0,a=o.length;i<a;i++)try{n=new ActiveXObject(o[i]);break}catch(t){}n.onreadystatechange=function(){if(n.readyState<4)return;if(200!==n.status)return;4===n.readyState&&e(n)},n.open("GET",t,!0),n.send("")}}()}]);